{"version":3,"sources":["components/TaskSelection.js","components/ContextSelection.js","components/PromptSelection.js","components/Sidebar.js","components/MainContent.js","App.js","backend/Backend.js","reportWebVitals.js","index.js"],"names":["TaskSelection","_ref","taskType","updateConfig","React","createElement","id","className","type","onClick","role","aria-label","ContextSelection","selectedContextId","numContexts","contextText","Array","keys","map","contextId","key","src","alt","PromptSelection","selectedPromptId","numPrompts","promptText","promptId","Sidebar","config","task","selectedContextID","selectedPromptID","MainContent","changeSelection","numFeatures","feat","style","visibility","interpolateColor","value","redColor","greenColor","midpointColor","hexToRgb","hex","bigint","parseInt","replace","Math","max","min","r","g","b","rgbGreen","rgbRed","rgbMid","t","round","toString","slice","toUpperCase","rgbToHex","App","setConfig","useState","contextData","tokens","triggerTokenSet","triggerFetchCoefficients","triggerFeatureValueCalculation","triggerTokenVisualization","appData","setAppData","coefficients","selectedFeatures","Set","featureValues","useEffect","fetch","then","response","json","data","prevConfig","console","log","length","divElement","document","getElementById","getElementsByClassName","textContent","setTokens","async","context_id","prompt_id","fetchCoefficients","featureSums","fill","projectedCoefficients","newKey","repeat","split","newValue","i","has","join","maxVal","val","calculateFeatureValues","isConfigComplete","tokenElement","scoreElement","rootStyles","getComputedStyle","documentElement","getPropertyValue","trim","overlayDefaultColor","selectedColor","backgroundColor","border","toFixed","color","colorTokens","imgElement","querySelector","imgOverlay","borderDefaultColor","colorPatches","newConfig","taskData","item","context_title","prompts","context","clickedFeature","hasFeature","delete","add","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","render","StrictMode"],"mappings":"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","file":"static/js/main.1b3bfdab.chunk.js","sourcesContent":["import React from 'react';\n\nfunction TaskSelection({ taskType, updateConfig }) {\n  return (\n    <div id=\"task-container\">\n      <h3>Select a Task</h3>\n      <div className=\"image-selection-grid\">\n        <button\n            type=\"button\"\n            className={`task-button ${taskType === 'image' ? 'selected' : ''}`}\n            onClick={() => updateConfig('task', 'image')}\n        >\n            <span role=\"img\" aria-label=\"image\">🖼️</span> Image\n        </button>\n        <button\n            type=\"button\"\n            className={`task-button ${taskType === 'text' ? 'selected' : ''}`}\n            onClick={() => updateConfig('task', 'text')}\n        >\n            <span role=\"img\" aria-label=\"text\">📄</span> Text\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default TaskSelection;","import React from 'react';\n\nfunction ContextSelection({ selectedContextId, numContexts, taskType, contextText, updateConfig }) {\n  if (!taskType) return null;\n\n  if (taskType === 'image') {\n    return (\n        <div id=\"context-container\">\n            <h3>Select an Image</h3>\n            <div className=\"image-selection-grid\" id='image-context-selection-grid'>\n                {[...Array(numContexts).keys()].map((contextId) => (\n                <div \n                    key={contextId}\n                    className={`context-image-button ${selectedContextId === contextId ? 'selected' : ''}`}\n                    onClick={() => updateConfig('selectedContextID', contextId)}\n                >\n                    <img src={`${process.env.PUBLIC_URL}/assets/image_${contextId}.png`} alt=\"Option\"/>\n                </div>\n                ))}\n            </div>\n        </div>\n      );\n  } \n  \n  if (taskType === 'text') {\n    return (\n        <div id=\"context-container\">\n            <h3>Select a Context</h3>\n            <div className={`text-selection-grid`}>\n                {[...Array(numContexts).keys()].map((contextId) => (\n                <button\n                    key={contextId}\n                    type=\"button\"\n                    className={`context-text-button ${selectedContextId === contextId ? 'selected' : ''}`}\n                    onClick={() => updateConfig('selectedContextID', contextId)}\n                >\n                    {contextText[contextId]}\n                </button>\n                ))}\n            </div>\n        </div>\n      );\n  }\n\n  return null;\n\n}\n\nexport default ContextSelection;","import React from 'react';\n\nfunction PromptSelection({ selectedPromptId, numPrompts, taskType, promptText, updateConfig }) {\n  if (!taskType || numPrompts === null) return null;\n\n  return (\n    <div id=\"prompt-container\">\n      <h3>Select a Prompt</h3>\n      <div className=\"text-selection-grid\">\n        {[...Array(numPrompts).keys()].map((promptId) => (\n          <button\n            key={promptId}\n            type=\"button\"\n            className={`prompt-button ${selectedPromptId === promptId ? 'selected' : ''}`}\n            onClick={() => updateConfig('selectedPromptID', promptId)}\n          >\n            {promptText[promptId]}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default PromptSelection;","import React from 'react';\nimport TaskSelection from './TaskSelection';\nimport ContextSelection from './ContextSelection';\nimport PromptSelection from './PromptSelection';\n\nfunction Sidebar({ config, updateConfig }) {\n  return (\n    <div className=\"sidebar\">\n      <h2><span role=\"img\" aria-label=\"sunglasses\">🕶️</span> SPEX</h2>\n      <TaskSelection taskType={config.task} updateConfig={updateConfig} />\n      <ContextSelection\n        selectedContextId={config.selectedContextID}\n        numContexts={config.numContexts}\n        taskType={config.task}\n        contextText={config.contextText}\n        updateConfig={updateConfig}\n      />\n      <PromptSelection\n        selectedPromptId={config.selectedPromptID}\n        numPrompts={config.numPrompts}\n        taskType={config.task}\n        promptText={config.promptText}\n        updateConfig={updateConfig}\n      />\n    </div>\n  );\n}\n\nexport default Sidebar;","import React from 'react';\n\nfunction MainContent({ config, changeSelection}) {\n  const { task, selectedContextID, numFeatures } = config;\n\n  if (!task || selectedContextID === null) return null;\n\n  if (task === 'image') {\n    var content = (\n      <div className=\"main-content\">\n          <div className=\"grid-container\">\n          {[...Array(numFeatures).keys()].map((feat) => (\n              <div key={feat} className=\"patch\" id={`patch-${feat}`} onClick={() => changeSelection(feat)}>\n              <img src={`${process.env.PUBLIC_URL}/assets/image_${selectedContextID}/split_${feat}.png`} alt=\"Part\" />\n              <div className=\"patch-overlay\"></div>\n              <div className=\"patch-text\" style={{ visibility: 'hidden' }}></div>\n              </div>\n          ))}\n          </div>\n      </div>\n    );\n    return content;\n  }\n  \n  if (task === 'text') {\n    return (\n      <div className=\"main-content\">\n          <div className=\"text-container\">\n          {[...Array(numFeatures).keys()].map((feat) => (\n              <div key={feat} className=\"token-wrapper\" id={`token-${feat}`} onClick={() => changeSelection(feat)} style={{ visibility: 'hidden' }}>\n              <div className=\"token-text\">0</div>\n              <span className=\"inline-token\"></span>\n              </div>\n          ))}\n          </div>\n      </div>\n    );\n  }\n\n}\n\nfunction colorTokens(numFeatures, selectedFeatures, featureValues, isConfigComplete){\n    for (let feat = 0; feat < `${numFeatures}`; feat++) {\n        let divElement = document.getElementById(`token-${feat}`);\n        let tokenElement = divElement.getElementsByClassName(\"inline-token\")[0];\n        let scoreElement = divElement.getElementsByClassName(\"token-text\")[0];\n\n        let rootStyles = getComputedStyle(document.documentElement);\n        let greenColor = rootStyles.getPropertyValue('--overlay-positive-color').trim();\n        let redColor = rootStyles.getPropertyValue('--overlay-negative-color').trim();\n        let overlayDefaultColor = rootStyles.getPropertyValue('--overlay-default-color').trim();\n        let selectedColor = rootStyles.getPropertyValue('--border-selected-color').trim();\n        let borderDefaultColor = rootStyles.getPropertyValue('--border-default-color').trim();\n\n        if (!isConfigComplete) {\n            scoreElement.textContent = \"\";\n            scoreElement.style.visibility = \"hidden\";\n            tokenElement.style.backgroundColor = `${overlayDefaultColor}60`;\n            tokenElement.style.border = `3px solid ${overlayDefaultColor}`;\n        } else if (selectedFeatures.has(feat)) {\n            scoreElement.textContent = \"\";\n            scoreElement.style.visibility = \"hidden\";\n            tokenElement.style.backgroundColor = `${selectedColor}60`;\n            tokenElement.style.border = `3px solid ${selectedColor}`;\n        } else {\n            scoreElement.textContent = featureValues[feat].toFixed(2);\n            scoreElement.style.visibility = \"visible\";\n            var backgroundColor = interpolateColor(featureValues[feat], redColor, greenColor, overlayDefaultColor);\n            tokenElement.style.backgroundColor = `${backgroundColor}60`;\n            tokenElement.style.border = `3px solid ${backgroundColor}`;\n            scoreElement.style.color = `${backgroundColor}`;\n        }\n    }\n}\n\nfunction colorPatches(numFeatures, selectedFeatures, featureValues, isConfigComplete){\n    for (let feat = 0; feat < `${numFeatures}`; feat++) {\n        let divElement = document.getElementById(`patch-${feat}`);\n        let imgElement = divElement.querySelector(\"img\");\n        let imgOverlay = divElement.getElementsByClassName(\"patch-overlay\")[0];\n        let scoreElement = divElement.getElementsByClassName(\"patch-text\")[0];\n        \n        let rootStyles = getComputedStyle(document.documentElement);\n        let greenColor = rootStyles.getPropertyValue('--overlay-positive-color').trim();\n        let redColor = rootStyles.getPropertyValue('--overlay-negative-color').trim();\n        let overlayDefaultColor = rootStyles.getPropertyValue('--overlay-default-color').trim();\n        let selectedColor = rootStyles.getPropertyValue('--border-selected-color').trim();\n        let borderDefaultColor = rootStyles.getPropertyValue('--border-default-color').trim();\n\n        if (!isConfigComplete) {\n            scoreElement.textContent = \"\";\n            scoreElement.style.visibility = \"hidden\";\n            imgElement.style.border = `6px solid ${borderDefaultColor}`;\n            imgOverlay.style.border = `6px solid ${borderDefaultColor}`;\n            imgOverlay.style.backgroundColor = `#00000000`;\n        } else if (selectedFeatures.has(feat)) {\n            scoreElement.textContent = \"\";\n            scoreElement.style.visibility = \"hidden\";\n            imgElement.style.border = `6px solid ${selectedColor}`;\n            imgOverlay.style.border = `6px solid ${selectedColor}`;\n            imgOverlay.style.backgroundColor = `${overlayDefaultColor}60`;\n        } else {\n            scoreElement.textContent = featureValues[feat].toFixed(2);\n            scoreElement.style.visibility = \"visible\";\n            var backgroundColor = interpolateColor(featureValues[feat], redColor, greenColor, overlayDefaultColor);\n            imgElement.style.border = `6px solid ${backgroundColor}`;\n            imgOverlay.style.border = `6px solid ${backgroundColor}`;\n            scoreElement.style.color = `${backgroundColor}`;\n            imgOverlay.style.backgroundColor = `${backgroundColor}60`;\n        }\n    }\n}\n\nfunction setTokens(tokens){\n    for (let feat = 0; feat < `${tokens.length}`; feat++) {\n        let divElement = document.getElementById(`token-${feat}`);\n        let tokenElement = divElement.getElementsByClassName(\"inline-token\")[0];\n        tokenElement.textContent = tokens[feat];\n        divElement.style.visibility = \"visible\";\n    }\n}\n\nexport { colorTokens , colorPatches, setTokens};\nexport default MainContent;\n\nfunction interpolateColor(value, redColor, greenColor, midpointColor) {\n    // Clamp value between -1 and 1\n    value = Math.max(-1, Math.min(1, value));\n    // Convert hex to RGB\n    function hexToRgb(hex) {\n        let bigint = parseInt(hex.replace(\"#\", \"\"), 16);\n        return [(bigint >> 16) & 255, (bigint >> 8) & 255, bigint & 255];\n    }\n    // Convert RGB to hex\n    function rgbToHex(r, g, b) {\n        return `#${((1 << 24) | (r << 16) | (g << 8) | b).toString(16).slice(1).toUpperCase()}`;\n    }\n    // Get RGB values\n    let rgbGreen = hexToRgb(greenColor);\n    let rgbRed = hexToRgb(redColor);\n    let rgbMid = hexToRgb(midpointColor);\n    // Normalize value from [-1,1] to [0,1]\n    let t = (value + 1) / 2;\n    let r, g, b;\n    if (t < 0.5) {\n        // Interpolate between red and midpoint\n        t = t * 2;\n        r = Math.round(rgbRed[0] + (rgbMid[0] - rgbRed[0]) * t);\n        g = Math.round(rgbRed[1] + (rgbMid[1] - rgbRed[1]) * t);\n        b = Math.round(rgbRed[2] + (rgbMid[2] - rgbRed[2]) * t);\n    } else {\n        // Interpolate between midpoint and green\n        t = (t - 0.5) * 2;\n        r = Math.round(rgbMid[0] + (rgbGreen[0] - rgbMid[0]) * t);\n        g = Math.round(rgbMid[1] + (rgbGreen[1] - rgbMid[1]) * t);\n        b = Math.round(rgbMid[2] + (rgbGreen[2] - rgbMid[2]) * t);\n    }\n    return rgbToHex(r, g, b);\n}\n","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Sidebar from './components/Sidebar';\nimport MainContent, {colorTokens, colorPatches, setTokens} from './components/MainContent';\nimport {fetchCoefficients, calculateFeatureValues} from './backend/Backend';\n\nfunction App() {\n  const [config, setConfig] = useState({\n    contextData: null,\n    task: null,\n    selectedContextID: null,\n    selectedPromptID: null,\n    numContexts: null,\n    contextText: [],\n    numPrompts: null,\n    promptText: [],\n    tokens: [],\n    numFeatures: 12,\n    triggerTokenSet: false,\n    triggerFetchCoefficients: false,\n    triggerFeatureValueCalculation: false,\n    triggerTokenVisualization: false,\n  });\n\n  const [appData, setAppData] = useState({\n    coefficients: null,\n    selectedFeatures: new Set(),\n    featureValues: null,\n  })\n\n  useEffect(() => {\n    fetch(`${process.env.PUBLIC_URL}/assets/config.json`)\n      .then((response) => response.json())\n      .then((data) => {\n        setConfig((prevConfig) => ({\n          ...prevConfig,\n          contextData: data,\n        }));\n      });\n  }, []);\n\n  useEffect(() => {\n    if (config.triggerTokenSet) {\n      console.log(\"token set\");\n      config.triggerTokenSet = false;\n      setTokens(config.tokens);\n    }\n  }, [config.triggerTokenSet, config.tokens]);\n\n  useEffect(() => {\n    if (config.triggerFetchCoefficients) {\n      console.log(\"fetch coefficients\");\n      config.triggerFetchCoefficients = false;\n      fetchCoefficients(config.task, config.selectedContextID, config.selectedPromptID)\n        .then((data) => {\n          setAppData((prevConfig) => ({\n        coefficients: data,\n        selectedFeatures: new Set(),\n        featureValues: null,\n          }));\n          setConfig((prevConfig) => ({\n        ...prevConfig,\n        triggerFeatureValueCalculation: true,\n          }));\n        });\n    }\n  }, [config.triggerFetchCoefficients, config.task, config.selectedContextID, config.selectedPromptID]);\n\n  useEffect(() => {\n    if (config.triggerFeatureValueCalculation) {\n      console.log(\"calculate feature values\");\n      config.triggerFeatureValueCalculation = false;\n      calculateFeatureValues(appData.coefficients, appData.selectedFeatures, config.numFeatures)\n        .then((data) => {\n          setAppData((prevConfig) => ({\n        ...prevConfig,\n        featureValues: data,\n          }));\n          setConfig((prevConfig) => ({\n        ...prevConfig,\n        triggerTokenVisualization: true,\n          }));\n        });\n    }\n  }, [config.triggerFeatureValueCalculation, appData.coefficients, appData.selectedFeatures, config.numFeatures]);\n\n  useEffect(() => {\n    if (config.triggerTokenVisualization) {\n      console.log(\"visualize tokens\");\n      config.triggerTokenVisualization = false;\n      if (config.task === 'text') {\n        colorTokens(config.numFeatures, appData.selectedFeatures, appData.featureValues, config.selectedPromptID !== null);\n      } else if (config.task === 'image') {\n        colorPatches(config.numFeatures, appData.selectedFeatures, appData.featureValues, config.selectedPromptID !== null);\n      }\n    }\n  }, [config.triggerTokenVisualization, config.task, config.numFeatures, appData.selectedFeatures, appData.featureValues, config.selectedPromptID]);\n\n  const updateConfig = (key, value) => {\n    setConfig((prevConfig) => {\n      const newConfig = { ...prevConfig, [key]: value };\n\n      if (key === 'task') {\n        const taskData = newConfig.contextData[value];\n        newConfig.numContexts = taskData.length;\n        newConfig.contextText = taskData.map((item) => item.context_title);\n        newConfig.selectedContextID = null;\n        newConfig.selectedPromptID = null;\n        newConfig.numPrompts = null;\n        newConfig.promptText = [];\n      }\n\n      if (key === 'selectedContextID') {\n        const taskData = newConfig.contextData[newConfig.task];\n        const contextData = taskData[value];\n        newConfig.numPrompts = contextData.prompts.length;\n        newConfig.promptText = contextData.prompts;\n        newConfig.selectedPromptID = null;\n        if (newConfig.task === 'text') {\n          newConfig.tokens = contextData.context.split(' ');\n          newConfig.numFeatures = newConfig.tokens.length;\n        } else if (newConfig.task === 'image') {\n          newConfig.tokens = [];\n          newConfig.numFeatures = 12;\n        }\n        newConfig.triggerTokenSet = true;\n        newConfig.triggerTokenVisualization = true;\n      }\n\n      if (key === 'selectedPromptID') {\n        newConfig.triggerFetchCoefficients = true;\n      }\n\n      return newConfig;\n    });\n  };\n\n  const changeSelection = (clickedFeature) => {\n\n    if (config.selectedContextID !== null && config.selectedPromptID !== null) {\n\n      const hasFeature = appData.selectedFeatures.has(clickedFeature);\n\n      setAppData((prevConfig) => {\n\n        if (clickedFeature === null) return prevConfig;\n\n        const newConfig = { ...prevConfig, selectedFeatures: new Set(prevConfig.selectedFeatures) };\n        if (hasFeature) {\n          newConfig.selectedFeatures.delete(clickedFeature);\n        } else {\n          newConfig.selectedFeatures.add(clickedFeature);\n        }\n\n        return newConfig;\n      });\n    }\n\n    config.triggerFeatureValueCalculation = true;\n\n  };\n\n  return (\n    <div className=\"App\">\n      <Sidebar config={config} updateConfig={updateConfig} />\n      <MainContent config={config} changeSelection={changeSelection}/>\n    </div>\n  );\n}\n\nexport default App;","async function fetchCoefficients(task, context_id, prompt_id){\n    const response = await fetch(`${process.env.PUBLIC_URL}/assets/spex/${task}/context_${context_id}/prompt_${prompt_id}.json`);\n    const data = await response.json();\n    return data;\n}\n\nasync function calculateFeatureValues(coefficients, selectedFeatures, numFeatures){\n    let featureSums = new Array(numFeatures).fill(0);\n\n    // Project the Fourier coefficients\n    let projectedCoefficients = {};\n    for (let key in coefficients) {\n        var newKey = '0'.repeat(numFeatures).split(\"\");\n        var newValue = coefficients[key];\n        for (let i = 0; i < numFeatures; i++) {\n            if (key[i] === '1'){\n                if (selectedFeatures.has(i)) {\n                    newValue *= (-1);\n                } else {\n                    newKey[i] = '1'\n                }\n            }\n        }\n        newKey = newKey.join(\"\");\n        if (newKey in projectedCoefficients) {\n            projectedCoefficients[newKey] = projectedCoefficients[newKey] + newValue;\n        } else {\n            projectedCoefficients[newKey] = newValue;\n        }\n    }\n\n    // Compute influence\n    for (let key in projectedCoefficients) {\n        for (let i = 0; i < numFeatures; i++) {\n            if (key[i] === '1') {\n                featureSums[i] += (projectedCoefficients[key] ** 2);\n            }\n        }\n    }\n\n    // Normalize influence\n    let maxVal = Math.max(...featureSums);\n    if (maxVal !== 0){\n        featureSums = featureSums.map(val => val / maxVal);\n    } else {\n        featureSums = featureSums.map(val => 0);\n    }\n    return featureSums;\n}\n\nexport { fetchCoefficients, calculateFeatureValues };\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}