(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(3),c=a.n(r);a(13),a(14);var o=function(e){let{taskType:t,updateConfig:a}=e;return l.a.createElement("div",{id:"task-container"},l.a.createElement("h3",null,"Select a Task"),l.a.createElement("div",{className:"image-selection-grid"},l.a.createElement("button",{type:"button",className:`task-button ${"image"===t?"selected":""}`,onClick:()=>a("task","image")},l.a.createElement("span",{role:"img","aria-label":"image"},"\ud83d\uddbc\ufe0f")," Image"),l.a.createElement("button",{type:"button",className:`task-button ${"text"===t?"selected":""}`,onClick:()=>a("task","text")},l.a.createElement("span",{role:"img","aria-label":"text"},"\ud83d\udcc4")," Text")))};var s=function(e){let{selectedContextId:t,numContexts:a,taskType:n,contextText:r,updateConfig:c}=e;return n?"image"===n?l.a.createElement("div",{id:"context-container"},l.a.createElement("h3",null,"Select an Image"),l.a.createElement("div",{className:"image-selection-grid",id:"image-context-selection-grid"},[...Array(a).keys()].map(e=>l.a.createElement("div",{key:e,className:`context-image-button ${t===e?"selected":""}`,onClick:()=>c("selected_context_id",e)},l.a.createElement("img",{src:`/spex-webapp/assets/image_${e}.png`,alt:"Option"}))))):"text"===n?l.a.createElement("div",{id:"context-container"},l.a.createElement("h3",null,"Select a Context"),l.a.createElement("div",{className:"text-selection-grid"},[...Array(a).keys()].map(e=>l.a.createElement("button",{key:e,type:"button",className:`context-text-button ${t===e?"selected":""}`,onClick:()=>c("selected_context_id",e)},r[e])))):null:null};var i=function(e){let{selectedPromptId:t,numPrompts:a,taskType:n,promptText:r,updateConfig:c}=e;return n&&null!==a?l.a.createElement("div",{id:"prompt-container"},l.a.createElement("h3",null,"Select a Prompt"),l.a.createElement("div",{className:"text-selection-grid"},[...Array(a).keys()].map(e=>l.a.createElement("button",{key:e,type:"button",className:`prompt-button ${t===e?"selected":""}`,onClick:()=>c("selected_prompt_id",e)},r[e])))):null};var m=function(e){let{config:t,updateConfig:a}=e;return l.a.createElement("div",{className:"sidebar"},l.a.createElement("h2",null,l.a.createElement("span",{role:"img","aria-label":"sunglasses"},"\ud83d\udd76\ufe0f")," SPEX"),l.a.createElement(o,{taskType:t.task,updateConfig:a}),l.a.createElement(s,{selectedContextId:t.selected_context_id,numContexts:t.num_contexts,taskType:t.task,contextText:t.context_text,updateConfig:a}),l.a.createElement(i,{selectedPromptId:t.selected_prompt_id,numPrompts:t.num_prompts,taskType:t.task,promptText:t.prompt_text,updateConfig:a}))};var d=function(e){let{config:t,changeSelection:a}=e;const{task:n,selected_context_id:r,num_features:c}=t;return n&&null!==r?"image"===n?l.a.createElement("div",{className:"main-content"},l.a.createElement("div",{className:"grid-container"},[...Array(c).keys()].map(e=>l.a.createElement("div",{key:e,className:"patch",id:`patch-${e}`,onClick:()=>a(e)},l.a.createElement("img",{src:`/spex-webapp/assets/image_${r}/split_${e}.png`,alt:"Part"}),l.a.createElement("div",{className:"patch-overlay"}),l.a.createElement("div",{className:"patch-text",style:{visibility:"hidden"}}))))):"text"===n?l.a.createElement("div",{className:"main-content"},l.a.createElement("div",{className:"text-container"},[...Array(c).keys()].map(e=>l.a.createElement("div",{key:e,className:"token-wrapper",id:`token-${e}`,onClick:()=>a(e),style:{visibility:"hidden"}},l.a.createElement("div",{className:"token-text"},"0"),l.a.createElement("span",{className:"inline-token"}))))):void 0:null};function u(e,t,a){function n(e){let t=parseInt(e.replace("#",""),16);return[t>>16&255,t>>8&255,255&t]}e=Math.max(-1,Math.min(1,e));let l=n(a),r=n(t),c=(e+1)/2;return function(e,t,a){return`#${(1<<24|e<<16|t<<8|a).toString(16).slice(1).toUpperCase()}`}(Math.round(r[0]+(l[0]-r[0])*c),Math.round(r[1]+(l[1]-r[1])*c),Math.round(r[2]+(l[2]-r[2])*c))}var p=function(){const[e,t]=Object(n.useState)({task:null,selected_context_id:null,selected_prompt_id:null,num_contexts:null,context_text:[],num_prompts:null,prompt_text:[],num_features:12,selected_features:new Set,feature_values:[]});return Object(n.useEffect)(()=>{fetch("/spex-webapp/config.json").then(e=>e.json()).then(e=>{t(t=>({...t,context_data:e}))})},[]),l.a.createElement("div",{className:"App"},l.a.createElement(m,{config:e,updateConfig:(e,a)=>{t(t=>{const n={...t,[e]:a};if("task"===e){const e=n.context_data[a];n.num_contexts=e.length,n.context_text=e.map(e=>e.context),n.selected_context_id=null,n.selected_prompt_id=null,n.num_prompts=null,n.prompt_text=[]}if("selected_context_id"===e){const e=n.context_data[n.task][a];n.num_prompts=e.prompts.length,n.prompt_text=e.prompts,n.selected_prompt_id=null}return"selected_prompt_id"===e&&(n.num_features=12,n.selected_features=new Set,n.feature_values=Array(n.num_features).fill(0)),console.log("Updated config:",e,a),n})}}),l.a.createElement(d,{config:e,changeSelection:a=>{t(e=>{if(null===a)return e;const t=e;return t.selected_features.has(a)?t.selected_features.delete(a):t.selected_features.add(a),t}),console.log("feature_values:",e.feature_values),function(e,t,a){for(let l=0;l<`${e}`;l++){let e=document.getElementById(`patch-${l}`),r=e.querySelector("img"),c=e.getElementsByClassName("patch-overlay")[0],o=e.getElementsByClassName("patch-text")[0],s=getComputedStyle(document.documentElement),i=s.getPropertyValue("--overlay-positive-color").trim(),m=s.getPropertyValue("--overlay-negative-color").trim(),d=s.getPropertyValue("--overlay-default-color").trim(),p=s.getPropertyValue("--border-selected-color").trim(),g=s.getPropertyValue("--border-default-color").trim();if(t.has(l))o.textContent="",o.style.visibility="hidden",r.style.border=`6px solid ${p}`,c.style.border=`6px solid ${p}`,c.style.backgroundColor=`${d}60`;else{o.textContent=a[l].toFixed(2),o.style.visibility="visible",r.style.border=`6px solid ${i}`,c.style.border=`6px solid ${g}`;var n=u(a[l],m,i);o.style.color=`${n}`,c.style.backgroundColor=`${n}60`}}}(e.num_features,e.selected_features,e.feature_values)}}))};var g=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,16)).then(t=>{let{getCLS:a,getFID:n,getFCP:l,getLCP:r,getTTFB:c}=t;a(e),n(e),l(e),r(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(p,null))),g()},4:function(e,t,a){e.exports=a(15)}},[[4,1,2]]]);
//# sourceMappingURL=main.4314d0f8.chunk.js.map